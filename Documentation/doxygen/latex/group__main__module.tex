\hypertarget{group__main__module}{}\section{main module documentation}
\label{group__main__module}\index{main module documentation@{main module documentation}}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\hypertarget{group__main__module_ga1bff611f282cc4bb4af703d51a2f647b}{}\#define {\bfseries C\+M\+D\+\_\+\+A\+N\+A\+L\+O\+G\+G\+E\+T}~0x11\label{group__main__module_ga1bff611f282cc4bb4af703d51a2f647b}

\item 
\hypertarget{group__main__module_ga3976a059911d8e824b239b942bdd22b3}{}\#define {\bfseries C\+M\+D\+\_\+\+D\+O\+R\+V\+A\+L\+U\+E\+S}~0x12\label{group__main__module_ga3976a059911d8e824b239b942bdd22b3}

\item 
\hypertarget{group__main__module_gafda68f85307e6882fef66b56a3cf9fa6}{}\#define {\bfseries C\+M\+D\+\_\+\+S\+E\+T\+C\+H\+A\+R}~0x13\label{group__main__module_gafda68f85307e6882fef66b56a3cf9fa6}

\item 
\hypertarget{group__main__module_ga90f87ae623514c4413d9bed1bc70708e}{}\#define {\bfseries C\+M\+D\+\_\+\+S\+E\+T\+M\+O\+D\+E}~0x14\label{group__main__module_ga90f87ae623514c4413d9bed1bc70708e}

\item 
\hypertarget{group__main__module_ga90b7a8cb7bc3fdbd98014a3e15ee6e9a}{}\#define {\bfseries T\+H\+R\+E\+A\+D\+\_\+\+S\+T\+A\+C\+K\+\_\+\+S\+I\+Z\+E}~100\label{group__main__module_ga90b7a8cb7bc3fdbd98014a3e15ee6e9a}

\item 
\hypertarget{group__main__module_ga300da08cc989dc0963caf3a5afc024b8}{}\#define {\bfseries N\+B\+\_\+\+A\+N\+A\+L\+O\+G\+\_\+\+C\+H\+A\+N\+N\+E\+L\+S}~3\label{group__main__module_ga300da08cc989dc0963caf3a5afc024b8}

\item 
\hypertarget{group__main__module_ga70a7dd109f59279a7520024b17e776d5}{}\#define {\bfseries Analog\+Inputs}~Analog\+\_\+\+Inputs\mbox{[}$\ast$(uint8\+\_\+t$\ast$)p\+Data\mbox{]}\label{group__main__module_ga70a7dd109f59279a7520024b17e776d5}

\item 
\hypertarget{group__main__module_ga90b7a8cb7bc3fdbd98014a3e15ee6e9a}{}\#define {\bfseries T\+H\+R\+E\+A\+D\+\_\+\+S\+T\+A\+C\+K\+\_\+\+S\+I\+Z\+E}~1024\label{group__main__module_ga90b7a8cb7bc3fdbd98014a3e15ee6e9a}

\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{group__main__module_gad9207f49ab9ed061b6dca6063112ca60}{F\+I\+F\+O\+\_\+\+Init} (\hyperlink{struct_t_f_i_f_o}{T\+F\+I\+F\+O} $\ast$const F\+I\+F\+O)
\begin{DoxyCompactList}\small\item\em Initialize the F\+I\+F\+O before first use. \end{DoxyCompactList}\item 
bool \hyperlink{group__main__module_gace64ba4e6bd943f990a294693156cc3b}{F\+I\+F\+O\+\_\+\+Put} (\hyperlink{struct_t_f_i_f_o}{T\+F\+I\+F\+O} $\ast$const F\+I\+F\+O, const uint8\+\_\+t data)
\begin{DoxyCompactList}\small\item\em Put one character into the F\+I\+F\+O. \end{DoxyCompactList}\item 
bool \hyperlink{group__main__module_ga6407e3daf24a826a7f17d3e48865e89a}{F\+I\+F\+O\+\_\+\+Get} (\hyperlink{struct_t_f_i_f_o}{T\+F\+I\+F\+O} $\ast$const F\+I\+F\+O, uint8\+\_\+t $\ast$const data\+Ptr)
\begin{DoxyCompactList}\small\item\em Get one character from the F\+I\+F\+O. \end{DoxyCompactList}\item 
bool \hyperlink{group__main__module_gac30606b79413b487e73dac23f591be4a}{Handle\+Analog\+Get\+Packet} (void)
\begin{DoxyCompactList}\small\item\em Handles a packet to get the instantaneous value of current from one of the A\+D\+C channels. \end{DoxyCompactList}\item 
bool \hyperlink{group__main__module_ga75733e9ade3cc030a8981653259f0136}{Handle\+D\+O\+R\+Values\+Packet} (void)
\begin{DoxyCompactList}\small\item\em Handles a packet to get various values about the D\+O\+R not already detailed in the tower protocol. \end{DoxyCompactList}\item 
bool \hyperlink{group__main__module_ga252d4f3523c9e44b9c404c9682331ecc}{Handle\+Set\+Char\+Packet} (void)
\begin{DoxyCompactList}\small\item\em Handles a packet to set the characteristic in use by the D\+O\+R. \end{DoxyCompactList}\item 
bool \hyperlink{group__main__module_ga9ea461c220078e580f655d0904e06a15}{Handle\+Set\+Mode\+Packet} (void)
\begin{DoxyCompactList}\small\item\em Handles a packet to change the D\+O\+R between sensitive and nonsensitive fault mode. \end{DoxyCompactList}\item 
void \hyperlink{group__main__module_gab7a5cb735555819b24719d6078028181}{Handle\+Packet} (void)
\begin{DoxyCompactList}\small\item\em Handles the packet by first checking to see what type of packet it is and processing it as per the Tower Serial Communication Protocol document. \end{DoxyCompactList}\item 
\hypertarget{group__main__module_ga1a74db037b63425694b8fc3365b59ec2}{}void \hyperlink{group__main__module_ga1a74db037b63425694b8fc3365b59ec2}{Trip\+Thread} (void $\ast$p\+Data)\label{group__main__module_ga1a74db037b63425694b8fc3365b59ec2}

\begin{DoxyCompactList}\small\item\em Thread to send a tripping signal through the D\+A\+C after a timeout period Tracks time elapsed in a local variable and keeps updating the new timer with each loop; waiting occurs at the end of each do-\/while loop, allowing for more samples to update the timer; if a new sample is Irms $<$ 1.\+03, end timing and reset everything. \end{DoxyCompactList}\item 
\hypertarget{group__main__module_gaf57aa549d9f31f77159135d6d2ae8de1}{}void \hyperlink{group__main__module_gaf57aa549d9f31f77159135d6d2ae8de1}{Sampling\+Thread} (void $\ast$p\+Data)\label{group__main__module_gaf57aa549d9f31f77159135d6d2ae8de1}

\begin{DoxyCompactList}\small\item\em Thread to collect samples at least 16 times per cycle (based on frequency 47.\+5-\/52.\+5\+Hz) and parse their R\+M\+S value to determine the correct timeout period for Trip\+Thread. Should be duplicated 3 times for each channel (3 phases) each with different arguments to distinguish channels. \end{DoxyCompactList}\item 
\hypertarget{group__main__module_ga94108820cbd6ec7384be98059164df0e}{}void \hyperlink{group__main__module_ga94108820cbd6ec7384be98059164df0e}{Packet\+Thread} (void $\ast$p\+Data)\label{group__main__module_ga94108820cbd6ec7384be98059164df0e}

\begin{DoxyCompactList}\small\item\em Packet handling thread -\/ M\+A\+K\+E S\+U\+R\+E T\+H\+I\+S I\+S A\+C\+T\+U\+A\+L\+L\+Y P\+O\+S\+S\+I\+B\+L\+E T\+O T\+R\+I\+G\+G\+E\+R. \end{DoxyCompactList}\item 
\hypertarget{group__main__module_ga840291bc02cba5474a4cb46a9b9566fe}{}int {\bfseries main} (void)\label{group__main__module_ga840291bc02cba5474a4cb46a9b9566fe}

\item 
bool \hyperlink{group__main__module_ga414aa3f521fdfd6e4586d98a946b6ab2}{Packet\+\_\+\+Init} (const uint32\+\_\+t baud\+Rate, const uint32\+\_\+t module\+Clk)
\begin{DoxyCompactList}\small\item\em Initializes the packets by calling the initialization routines of the supporting software modules. \end{DoxyCompactList}\item 
bool \hyperlink{group__main__module_gac58a17928cd5e556e1567b2fde9f88f0}{Packet\+\_\+\+Get} (void)
\begin{DoxyCompactList}\small\item\em Attempts to get a packet from the received data. \end{DoxyCompactList}\item 
bool \hyperlink{group__main__module_ga431a1e1da25a8214a502ec81f88fc3f1}{Packet\+\_\+\+Put} (const uint8\+\_\+t command, const uint8\+\_\+t parameter1, const uint8\+\_\+t parameter2, const uint8\+\_\+t parameter3)
\begin{DoxyCompactList}\small\item\em Builds a packet and places it in the transmit F\+I\+F\+O buffer. \end{DoxyCompactList}\item 
bool \hyperlink{group__main__module_ga917cbc0a1cc3170383fe09ffdf83be94}{P\+I\+T\+\_\+\+Init} (const uint32\+\_\+t module\+Clk, O\+S\+\_\+\+E\+C\+B $\ast$semaphore\mbox{[}$\,$\mbox{]})
\begin{DoxyCompactList}\small\item\em Sets up the P\+I\+T before first use. \end{DoxyCompactList}\item 
void \hyperlink{group__main__module_gae012c6f6b7396828c558c92ad0a27ed5}{P\+I\+T\+\_\+\+Set} (const uint32\+\_\+t period, const bool restart)
\begin{DoxyCompactList}\small\item\em Sets the value of the desired period of the P\+I\+T. \end{DoxyCompactList}\item 
uint32\+\_\+t \hyperlink{group__main__module_ga9ed891dffd7e79883573987184631b61}{P\+I\+T\+\_\+\+Get\+Time} (void)
\begin{DoxyCompactList}\small\item\em gets the P\+I\+T1 timer value (used for D\+O\+R timestamping). Since the P\+I\+T timer decrements instead of incrementing, we will take the inverse of the time (ie. (2$^\wedge$32)-\/1 -\/ P\+I\+T\+\_\+\+C\+V\+A\+L1) for the sake of clarity in the D\+O\+R inverse timing (since real time goes up not down!) \end{DoxyCompactList}\item 
void \hyperlink{group__main__module_gaed902f6158d6681e4b05d078575e4b09}{P\+I\+T\+\_\+\+Enable} (const bool enable)
\begin{DoxyCompactList}\small\item\em Enables or disables the P\+I\+T. \end{DoxyCompactList}\item 
void \hyperlink{group__main__module_ga445500277ba0e363873b34cffc015745}{\+\_\+\+\_\+attribute\+\_\+\+\_\+} ((interrupt))
\begin{DoxyCompactList}\small\item\em Interrupt service routine for the P\+I\+T. \end{DoxyCompactList}\item 
bool \hyperlink{group__main__module_gae5760d1a086ec79a33901db253000af9}{U\+A\+R\+T\+\_\+\+Init} (const uint32\+\_\+t baud\+Rate, const uint32\+\_\+t module\+Clk)
\begin{DoxyCompactList}\small\item\em Sets up the U\+A\+R\+T interface before first use. \end{DoxyCompactList}\item 
bool \hyperlink{group__main__module_ga03049bcc3bf9af2a75ee77016d3b0d60}{U\+A\+R\+T\+\_\+\+In\+Char} (uint8\+\_\+t $\ast$const data\+Ptr)
\begin{DoxyCompactList}\small\item\em Get a character from the receive F\+I\+F\+O if it is not empty. \end{DoxyCompactList}\item 
bool \hyperlink{group__main__module_gab20ebaeefd1f29d31e098ade31189dda}{U\+A\+R\+T\+\_\+\+Out\+Char} (const uint8\+\_\+t data)
\begin{DoxyCompactList}\small\item\em Put a byte in the transmit F\+I\+F\+O if it is not full. \end{DoxyCompactList}\item 
void \hyperlink{group__main__module_ga799b375101827a18f652a3f28ecefcd0}{U\+A\+R\+T\+\_\+\+Poll} (void)
\begin{DoxyCompactList}\small\item\em Poll the U\+A\+R\+T status register to try and receive and/or transmit one character. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hypertarget{group__main__module_ga997a52ba20d93cfdbe75937a9393a5d4}{}const uint8\+\_\+t {\bfseries T\+R\+I\+P\+\_\+\+T\+H\+R\+E\+A\+D\+\_\+\+P\+R\+I\+O\+R\+I\+T\+Y} \mbox{[}N\+B\+\_\+\+A\+N\+A\+L\+O\+G\+\_\+\+C\+H\+A\+N\+N\+E\+L\+S\mbox{]} = \{1, 2, 3\}\label{group__main__module_ga997a52ba20d93cfdbe75937a9393a5d4}

\item 
\hypertarget{group__main__module_ga2bd07bb6277f2194fc481e286400bfd6}{}const uint8\+\_\+t {\bfseries S\+A\+M\+P\+L\+I\+N\+G\+\_\+\+T\+H\+R\+E\+A\+D\+\_\+\+P\+R\+I\+O\+R\+I\+T\+Y} \mbox{[}N\+B\+\_\+\+A\+N\+A\+L\+O\+G\+\_\+\+C\+H\+A\+N\+N\+E\+L\+S\mbox{]} = \{4, 5, 6\}\label{group__main__module_ga2bd07bb6277f2194fc481e286400bfd6}

\item 
\hypertarget{group__main__module_ga6ed665ddbfa319f03b2bf15b9492ecb5}{}const uint8\+\_\+t {\bfseries P\+A\+C\+K\+E\+T\+\_\+\+T\+H\+R\+E\+A\+D\+\_\+\+P\+R\+I\+O\+R\+I\+T\+Y} = 7\label{group__main__module_ga6ed665ddbfa319f03b2bf15b9492ecb5}

\item 
\hypertarget{group__main__module_gac74c1cf77ae5807a61baefd6df20201e}{}\hyperlink{union_t_packet}{T\+Packet} {\bfseries Packet}\label{group__main__module_gac74c1cf77ae5807a61baefd6df20201e}

\item 
\hypertarget{group__main__module_ga5faca24c448374dc4656ebc31afcae0b}{}const uint8\+\_\+t {\bfseries P\+A\+C\+K\+E\+T\+\_\+\+A\+C\+K\+\_\+\+M\+A\+S\+K} = 0x80\label{group__main__module_ga5faca24c448374dc4656ebc31afcae0b}

\end{DoxyCompactItemize}


\subsection{Detailed Description}
\begin{DoxyAuthor}{Author}
Michael Codner 
\end{DoxyAuthor}


\subsection{Function Documentation}
\hypertarget{group__main__module_ga445500277ba0e363873b34cffc015745}{}\index{main module documentation@{main module documentation}!\+\_\+\+\_\+attribute\+\_\+\+\_\+@{\+\_\+\+\_\+attribute\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+attribute\+\_\+\+\_\+@{\+\_\+\+\_\+attribute\+\_\+\+\_\+}!main module documentation@{main module documentation}}
\subsubsection[{\+\_\+\+\_\+attribute\+\_\+\+\_\+((interrupt))}]{\setlength{\rightskip}{0pt plus 5cm}void \+\_\+\+\_\+attribute\+\_\+\+\_\+ (
\begin{DoxyParamCaption}
\item[{(interrupt)}]{}
\end{DoxyParamCaption}
)}\label{group__main__module_ga445500277ba0e363873b34cffc015745}


Interrupt service routine for the P\+I\+T. 

Interrupt service routine for the U\+A\+R\+T.

The periodic interrupt timer has timed out. The user callback function will be called. \begin{DoxyNote}{Note}
Assumes the P\+I\+T has been initialized. 
\end{DoxyNote}
\hypertarget{group__main__module_ga6407e3daf24a826a7f17d3e48865e89a}{}\index{main module documentation@{main module documentation}!F\+I\+F\+O\+\_\+\+Get@{F\+I\+F\+O\+\_\+\+Get}}
\index{F\+I\+F\+O\+\_\+\+Get@{F\+I\+F\+O\+\_\+\+Get}!main module documentation@{main module documentation}}
\subsubsection[{F\+I\+F\+O\+\_\+\+Get(\+T\+F\+I\+F\+O $\ast$const F\+I\+F\+O, uint8\+\_\+t $\ast$const data\+Ptr)}]{\setlength{\rightskip}{0pt plus 5cm}bool F\+I\+F\+O\+\_\+\+Get (
\begin{DoxyParamCaption}
\item[{{\bf T\+F\+I\+F\+O} $\ast$const}]{F\+I\+F\+O, }
\item[{uint8\+\_\+t $\ast$const}]{data\+Ptr}
\end{DoxyParamCaption}
)}\label{group__main__module_ga6407e3daf24a826a7f17d3e48865e89a}


Get one character from the F\+I\+F\+O. 


\begin{DoxyParams}{Parameters}
{\em F\+I\+F\+O} & A pointer to a F\+I\+F\+O struct with data to be retrieved. \\
\hline
{\em data\+Ptr} & A pointer to a memory location to place the retrieved byte. \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
Assumes that F\+I\+F\+O\+\_\+\+Init has been called. 
\end{DoxyNote}
\hypertarget{group__main__module_gad9207f49ab9ed061b6dca6063112ca60}{}\index{main module documentation@{main module documentation}!F\+I\+F\+O\+\_\+\+Init@{F\+I\+F\+O\+\_\+\+Init}}
\index{F\+I\+F\+O\+\_\+\+Init@{F\+I\+F\+O\+\_\+\+Init}!main module documentation@{main module documentation}}
\subsubsection[{F\+I\+F\+O\+\_\+\+Init(\+T\+F\+I\+F\+O $\ast$const F\+I\+F\+O)}]{\setlength{\rightskip}{0pt plus 5cm}void F\+I\+F\+O\+\_\+\+Init (
\begin{DoxyParamCaption}
\item[{{\bf T\+F\+I\+F\+O} $\ast$const}]{F\+I\+F\+O}
\end{DoxyParamCaption}
)}\label{group__main__module_gad9207f49ab9ed061b6dca6063112ca60}


Initialize the F\+I\+F\+O before first use. 


\begin{DoxyParams}{Parameters}
{\em F\+I\+F\+O} & A pointer to the F\+I\+F\+O that needs initializing. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}
\hypertarget{group__main__module_gace64ba4e6bd943f990a294693156cc3b}{}\index{main module documentation@{main module documentation}!F\+I\+F\+O\+\_\+\+Put@{F\+I\+F\+O\+\_\+\+Put}}
\index{F\+I\+F\+O\+\_\+\+Put@{F\+I\+F\+O\+\_\+\+Put}!main module documentation@{main module documentation}}
\subsubsection[{F\+I\+F\+O\+\_\+\+Put(\+T\+F\+I\+F\+O $\ast$const F\+I\+F\+O, const uint8\+\_\+t data)}]{\setlength{\rightskip}{0pt plus 5cm}bool F\+I\+F\+O\+\_\+\+Put (
\begin{DoxyParamCaption}
\item[{{\bf T\+F\+I\+F\+O} $\ast$const}]{F\+I\+F\+O, }
\item[{const uint8\+\_\+t}]{data}
\end{DoxyParamCaption}
)}\label{group__main__module_gace64ba4e6bd943f990a294693156cc3b}


Put one character into the F\+I\+F\+O. 


\begin{DoxyParams}{Parameters}
{\em F\+I\+F\+O} & A pointer to a F\+I\+F\+O struct where data is to be stored. \\
\hline
{\em data} & A byte of data to store in the F\+I\+F\+O buffer. \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
Assumes that F\+I\+F\+O\+\_\+\+Init has been called. 
\end{DoxyNote}
\hypertarget{group__main__module_gac30606b79413b487e73dac23f591be4a}{}\index{main module documentation@{main module documentation}!Handle\+Analog\+Get\+Packet@{Handle\+Analog\+Get\+Packet}}
\index{Handle\+Analog\+Get\+Packet@{Handle\+Analog\+Get\+Packet}!main module documentation@{main module documentation}}
\subsubsection[{Handle\+Analog\+Get\+Packet(void)}]{\setlength{\rightskip}{0pt plus 5cm}bool Handle\+Analog\+Get\+Packet (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\label{group__main__module_gac30606b79413b487e73dac23f591be4a}


Handles a packet to get the instantaneous value of current from one of the A\+D\+C channels. 

Parameter1 = channel number (0 -\/ 3) Parameter2 = 0x0, Parameter3 = 0x0

\begin{DoxyReturn}{Returns}
bool -\/ T\+R\+U\+E if the packet was handled successfully, F\+A\+L\+S\+E if channel\+Nb out of range 
\end{DoxyReturn}
\hypertarget{group__main__module_ga75733e9ade3cc030a8981653259f0136}{}\index{main module documentation@{main module documentation}!Handle\+D\+O\+R\+Values\+Packet@{Handle\+D\+O\+R\+Values\+Packet}}
\index{Handle\+D\+O\+R\+Values\+Packet@{Handle\+D\+O\+R\+Values\+Packet}!main module documentation@{main module documentation}}
\subsubsection[{Handle\+D\+O\+R\+Values\+Packet(void)}]{\setlength{\rightskip}{0pt plus 5cm}bool Handle\+D\+O\+R\+Values\+Packet (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\label{group__main__module_ga75733e9ade3cc030a8981653259f0136}


Handles a packet to get various values about the D\+O\+R not already detailed in the tower protocol. 

Parameter1 = 0x0 (Char\+Type), 0x1 (current freq.), 0x2 (Times\+Tripped), 0x3 (last\+Fault\+Type), 0x4 (Sensitive\+Mode) Parameter2 = 0x0, Parameter3 = channel\+Nb (for freq)

\begin{DoxyReturn}{Returns}
bool -\/ T\+R\+U\+E if the packet was handled successfully, F\+A\+L\+S\+E if parameter1 out of range 
\end{DoxyReturn}
\hypertarget{group__main__module_gab7a5cb735555819b24719d6078028181}{}\index{main module documentation@{main module documentation}!Handle\+Packet@{Handle\+Packet}}
\index{Handle\+Packet@{Handle\+Packet}!main module documentation@{main module documentation}}
\subsubsection[{Handle\+Packet(void)}]{\setlength{\rightskip}{0pt plus 5cm}void Handle\+Packet (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\label{group__main__module_gab7a5cb735555819b24719d6078028181}


Handles the packet by first checking to see what type of packet it is and processing it as per the Tower Serial Communication Protocol document. 

Check if the handling of the packet was a success and an A\+C\+K packet was requested If that checks out, set the A\+C\+K bit to 1 Else, if the handling of the packet failed and an A\+C\+K packet was requested Clear the A\+C\+K bit in order to indicate a N\+A\+K (command could not be carried out) Finally, return the A\+C\+K packet to the Tower\hypertarget{group__main__module_ga252d4f3523c9e44b9c404c9682331ecc}{}\index{main module documentation@{main module documentation}!Handle\+Set\+Char\+Packet@{Handle\+Set\+Char\+Packet}}
\index{Handle\+Set\+Char\+Packet@{Handle\+Set\+Char\+Packet}!main module documentation@{main module documentation}}
\subsubsection[{Handle\+Set\+Char\+Packet(void)}]{\setlength{\rightskip}{0pt plus 5cm}bool Handle\+Set\+Char\+Packet (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\label{group__main__module_ga252d4f3523c9e44b9c404c9682331ecc}


Handles a packet to set the characteristic in use by the D\+O\+R. 

Parameter1 = 0x0 (inverse), 0x1 (very inverse), 0x2 (extremely inverse) Parameter2 = 0, Parameter3 = 0

\begin{DoxyReturn}{Returns}
bool -\/ T\+R\+U\+E if the packet was handled successfully. 
\end{DoxyReturn}
\hypertarget{group__main__module_ga9ea461c220078e580f655d0904e06a15}{}\index{main module documentation@{main module documentation}!Handle\+Set\+Mode\+Packet@{Handle\+Set\+Mode\+Packet}}
\index{Handle\+Set\+Mode\+Packet@{Handle\+Set\+Mode\+Packet}!main module documentation@{main module documentation}}
\subsubsection[{Handle\+Set\+Mode\+Packet(void)}]{\setlength{\rightskip}{0pt plus 5cm}bool Handle\+Set\+Mode\+Packet (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\label{group__main__module_ga9ea461c220078e580f655d0904e06a15}


Handles a packet to change the D\+O\+R between sensitive and nonsensitive fault mode. 

Parameter1 = 0x0 (nonsensitive) or 0x1 (sensitive), Parameter2 = 0x0, Parameter3 = 0x0

\begin{DoxyReturn}{Returns}
bool -\/ T\+R\+U\+E if the packet was handled successfully, F\+A\+L\+S\+E if parameter1 out of range 
\end{DoxyReturn}
\hypertarget{group__main__module_gac58a17928cd5e556e1567b2fde9f88f0}{}\index{main module documentation@{main module documentation}!Packet\+\_\+\+Get@{Packet\+\_\+\+Get}}
\index{Packet\+\_\+\+Get@{Packet\+\_\+\+Get}!main module documentation@{main module documentation}}
\subsubsection[{Packet\+\_\+\+Get(void)}]{\setlength{\rightskip}{0pt plus 5cm}bool Packet\+\_\+\+Get (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\label{group__main__module_gac58a17928cd5e556e1567b2fde9f88f0}


Attempts to get a packet from the received data. 

\begin{DoxyReturn}{Returns}
bool -\/ T\+R\+U\+E if a valid packet was received. 
\end{DoxyReturn}
\hypertarget{group__main__module_ga414aa3f521fdfd6e4586d98a946b6ab2}{}\index{main module documentation@{main module documentation}!Packet\+\_\+\+Init@{Packet\+\_\+\+Init}}
\index{Packet\+\_\+\+Init@{Packet\+\_\+\+Init}!main module documentation@{main module documentation}}
\subsubsection[{Packet\+\_\+\+Init(const uint32\+\_\+t baud\+Rate, const uint32\+\_\+t module\+Clk)}]{\setlength{\rightskip}{0pt plus 5cm}bool Packet\+\_\+\+Init (
\begin{DoxyParamCaption}
\item[{const uint32\+\_\+t}]{baud\+Rate, }
\item[{const uint32\+\_\+t}]{module\+Clk}
\end{DoxyParamCaption}
)}\label{group__main__module_ga414aa3f521fdfd6e4586d98a946b6ab2}


Initializes the packets by calling the initialization routines of the supporting software modules. 


\begin{DoxyParams}{Parameters}
{\em baud\+Rate} & The desired baud rate in bits/sec. \\
\hline
{\em module\+Clk} & The module clock rate in Hz. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bool -\/ T\+R\+U\+E if the packet module was successfully initialized. 
\end{DoxyReturn}
\hypertarget{group__main__module_ga431a1e1da25a8214a502ec81f88fc3f1}{}\index{main module documentation@{main module documentation}!Packet\+\_\+\+Put@{Packet\+\_\+\+Put}}
\index{Packet\+\_\+\+Put@{Packet\+\_\+\+Put}!main module documentation@{main module documentation}}
\subsubsection[{Packet\+\_\+\+Put(const uint8\+\_\+t command, const uint8\+\_\+t parameter1, const uint8\+\_\+t parameter2, const uint8\+\_\+t parameter3)}]{\setlength{\rightskip}{0pt plus 5cm}bool Packet\+\_\+\+Put (
\begin{DoxyParamCaption}
\item[{const uint8\+\_\+t}]{command, }
\item[{const uint8\+\_\+t}]{parameter1, }
\item[{const uint8\+\_\+t}]{parameter2, }
\item[{const uint8\+\_\+t}]{parameter3}
\end{DoxyParamCaption}
)}\label{group__main__module_ga431a1e1da25a8214a502ec81f88fc3f1}


Builds a packet and places it in the transmit F\+I\+F\+O buffer. 

\begin{DoxyReturn}{Returns}
bool -\/ T\+R\+U\+E if a valid packet was sent. 
\end{DoxyReturn}
\hypertarget{group__main__module_gaed902f6158d6681e4b05d078575e4b09}{}\index{main module documentation@{main module documentation}!P\+I\+T\+\_\+\+Enable@{P\+I\+T\+\_\+\+Enable}}
\index{P\+I\+T\+\_\+\+Enable@{P\+I\+T\+\_\+\+Enable}!main module documentation@{main module documentation}}
\subsubsection[{P\+I\+T\+\_\+\+Enable(const bool enable)}]{\setlength{\rightskip}{0pt plus 5cm}void P\+I\+T\+\_\+\+Enable (
\begin{DoxyParamCaption}
\item[{const bool}]{enable}
\end{DoxyParamCaption}
)}\label{group__main__module_gaed902f6158d6681e4b05d078575e4b09}


Enables or disables the P\+I\+T. 


\begin{DoxyParams}{Parameters}
{\em enable} & -\/ T\+R\+U\+E if the P\+I\+T is to be enabled, F\+A\+L\+S\+E if the P\+I\+T is to be disabled. \\
\hline
\end{DoxyParams}
\hypertarget{group__main__module_ga9ed891dffd7e79883573987184631b61}{}\index{main module documentation@{main module documentation}!P\+I\+T\+\_\+\+Get\+Time@{P\+I\+T\+\_\+\+Get\+Time}}
\index{P\+I\+T\+\_\+\+Get\+Time@{P\+I\+T\+\_\+\+Get\+Time}!main module documentation@{main module documentation}}
\subsubsection[{P\+I\+T\+\_\+\+Get\+Time(void)}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t P\+I\+T\+\_\+\+Get\+Time (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\label{group__main__module_ga9ed891dffd7e79883573987184631b61}


gets the P\+I\+T1 timer value (used for D\+O\+R timestamping). Since the P\+I\+T timer decrements instead of incrementing, we will take the inverse of the time (ie. (2$^\wedge$32)-\/1 -\/ P\+I\+T\+\_\+\+C\+V\+A\+L1) for the sake of clarity in the D\+O\+R inverse timing (since real time goes up not down!) 

\begin{DoxyReturn}{Returns}
returns the current time elapsed in ms 
\end{DoxyReturn}
\hypertarget{group__main__module_ga917cbc0a1cc3170383fe09ffdf83be94}{}\index{main module documentation@{main module documentation}!P\+I\+T\+\_\+\+Init@{P\+I\+T\+\_\+\+Init}}
\index{P\+I\+T\+\_\+\+Init@{P\+I\+T\+\_\+\+Init}!main module documentation@{main module documentation}}
\subsubsection[{P\+I\+T\+\_\+\+Init(const uint32\+\_\+t module\+Clk, O\+S\+\_\+\+E\+C\+B $\ast$semaphore[])}]{\setlength{\rightskip}{0pt plus 5cm}bool P\+I\+T\+\_\+\+Init (
\begin{DoxyParamCaption}
\item[{const uint32\+\_\+t}]{module\+Clk, }
\item[{O\+S\+\_\+\+E\+C\+B $\ast$}]{semaphore\mbox{[}$\,$\mbox{]}}
\end{DoxyParamCaption}
)}\label{group__main__module_ga917cbc0a1cc3170383fe09ffdf83be94}


Sets up the P\+I\+T before first use. 

Enables the P\+I\+T and freezes the timer when debugging. 
\begin{DoxyParams}{Parameters}
{\em module\+Clk} & The module clock rate in Hz. \\
\hline
{\em semaphore} & to array of semaphores for signaling in the I\+S\+R \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bool -\/ T\+R\+U\+E if the P\+I\+T was successfully initialized. 
\end{DoxyReturn}
\begin{DoxyNote}{Note}
Assumes that module\+Clk has a period which can be expressed as an integral number of nanoseconds. 
\end{DoxyNote}
\hypertarget{group__main__module_gae012c6f6b7396828c558c92ad0a27ed5}{}\index{main module documentation@{main module documentation}!P\+I\+T\+\_\+\+Set@{P\+I\+T\+\_\+\+Set}}
\index{P\+I\+T\+\_\+\+Set@{P\+I\+T\+\_\+\+Set}!main module documentation@{main module documentation}}
\subsubsection[{P\+I\+T\+\_\+\+Set(const uint32\+\_\+t period, const bool restart)}]{\setlength{\rightskip}{0pt plus 5cm}void P\+I\+T\+\_\+\+Set (
\begin{DoxyParamCaption}
\item[{const uint32\+\_\+t}]{period, }
\item[{const bool}]{restart}
\end{DoxyParamCaption}
)}\label{group__main__module_gae012c6f6b7396828c558c92ad0a27ed5}


Sets the value of the desired period of the P\+I\+T. 


\begin{DoxyParams}{Parameters}
{\em period} & The desired value of the timer period in nanoseconds. \\
\hline
{\em restart} & T\+R\+U\+E if the P\+I\+T is disabled, a new value set, and then enabled. F\+A\+L\+S\+E if the P\+I\+T will use the new value after a trigger event. \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
The function will enable the timer and interrupts for the P\+I\+T. 
\end{DoxyNote}
\hypertarget{group__main__module_ga03049bcc3bf9af2a75ee77016d3b0d60}{}\index{main module documentation@{main module documentation}!U\+A\+R\+T\+\_\+\+In\+Char@{U\+A\+R\+T\+\_\+\+In\+Char}}
\index{U\+A\+R\+T\+\_\+\+In\+Char@{U\+A\+R\+T\+\_\+\+In\+Char}!main module documentation@{main module documentation}}
\subsubsection[{U\+A\+R\+T\+\_\+\+In\+Char(uint8\+\_\+t $\ast$const data\+Ptr)}]{\setlength{\rightskip}{0pt plus 5cm}bool U\+A\+R\+T\+\_\+\+In\+Char (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t $\ast$const}]{data\+Ptr}
\end{DoxyParamCaption}
)}\label{group__main__module_ga03049bcc3bf9af2a75ee77016d3b0d60}


Get a character from the receive F\+I\+F\+O if it is not empty. 


\begin{DoxyParams}{Parameters}
{\em data\+Ptr} & A pointer to memory to store the retrieved byte. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bool -\/ T\+R\+U\+E if the receive F\+I\+F\+O returned a character. 
\end{DoxyReturn}
\begin{DoxyNote}{Note}
Assumes that U\+A\+R\+T\+\_\+\+Init has been called. 
\end{DoxyNote}
\hypertarget{group__main__module_gae5760d1a086ec79a33901db253000af9}{}\index{main module documentation@{main module documentation}!U\+A\+R\+T\+\_\+\+Init@{U\+A\+R\+T\+\_\+\+Init}}
\index{U\+A\+R\+T\+\_\+\+Init@{U\+A\+R\+T\+\_\+\+Init}!main module documentation@{main module documentation}}
\subsubsection[{U\+A\+R\+T\+\_\+\+Init(const uint32\+\_\+t baud\+Rate, const uint32\+\_\+t module\+Clk)}]{\setlength{\rightskip}{0pt plus 5cm}bool U\+A\+R\+T\+\_\+\+Init (
\begin{DoxyParamCaption}
\item[{const uint32\+\_\+t}]{baud\+Rate, }
\item[{const uint32\+\_\+t}]{module\+Clk}
\end{DoxyParamCaption}
)}\label{group__main__module_gae5760d1a086ec79a33901db253000af9}


Sets up the U\+A\+R\+T interface before first use. 

Initializing the U\+A\+R\+T send parameters\+: baud\+Rate = 115200, module\+Clk = C\+P\+U\+\_\+\+B\+U\+S\+\_\+\+C\+L\+K\+\_\+\+H\+Z \hypertarget{group__main__module_gab20ebaeefd1f29d31e098ade31189dda}{}\index{main module documentation@{main module documentation}!U\+A\+R\+T\+\_\+\+Out\+Char@{U\+A\+R\+T\+\_\+\+Out\+Char}}
\index{U\+A\+R\+T\+\_\+\+Out\+Char@{U\+A\+R\+T\+\_\+\+Out\+Char}!main module documentation@{main module documentation}}
\subsubsection[{U\+A\+R\+T\+\_\+\+Out\+Char(const uint8\+\_\+t data)}]{\setlength{\rightskip}{0pt plus 5cm}bool U\+A\+R\+T\+\_\+\+Out\+Char (
\begin{DoxyParamCaption}
\item[{const uint8\+\_\+t}]{data}
\end{DoxyParamCaption}
)}\label{group__main__module_gab20ebaeefd1f29d31e098ade31189dda}


Put a byte in the transmit F\+I\+F\+O if it is not full. 


\begin{DoxyParams}{Parameters}
{\em data} & The byte to be placed in the transmit F\+I\+F\+O. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bool -\/ T\+R\+U\+E if the data was placed in the transmit F\+I\+F\+O. 
\end{DoxyReturn}
\begin{DoxyNote}{Note}
Assumes that U\+A\+R\+T\+\_\+\+Init has been called. 
\end{DoxyNote}
\hypertarget{group__main__module_ga799b375101827a18f652a3f28ecefcd0}{}\index{main module documentation@{main module documentation}!U\+A\+R\+T\+\_\+\+Poll@{U\+A\+R\+T\+\_\+\+Poll}}
\index{U\+A\+R\+T\+\_\+\+Poll@{U\+A\+R\+T\+\_\+\+Poll}!main module documentation@{main module documentation}}
\subsubsection[{U\+A\+R\+T\+\_\+\+Poll(void)}]{\setlength{\rightskip}{0pt plus 5cm}void U\+A\+R\+T\+\_\+\+Poll (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\label{group__main__module_ga799b375101827a18f652a3f28ecefcd0}


Poll the U\+A\+R\+T status register to try and receive and/or transmit one character. 

\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}
\begin{DoxyNote}{Note}
Assumes that U\+A\+R\+T\+\_\+\+Init has been called. 
\end{DoxyNote}
