\hypertarget{main_8c}{}\section{D\+:/\+Project/\+Sources/main.c File Reference}
\label{main_8c}\index{D\+:/\+Project/\+Sources/main.\+c@{D\+:/\+Project/\+Sources/main.\+c}}


Main module. This module contains user\textquotesingle{}s application code.  


{\ttfamily \#include \char`\"{}types.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}math.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}stdlib.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}Cpu.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}analog.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}O\+S.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}packet.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}U\+A\+R\+T.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}P\+I\+T.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}Flash.\+h\char`\"{}}\\*
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\hypertarget{group__main__module_ga1bff611f282cc4bb4af703d51a2f647b}{}\#define {\bfseries C\+M\+D\+\_\+\+A\+N\+A\+L\+O\+G\+G\+E\+T}~0x11\label{group__main__module_ga1bff611f282cc4bb4af703d51a2f647b}

\item 
\hypertarget{group__main__module_ga3976a059911d8e824b239b942bdd22b3}{}\#define {\bfseries C\+M\+D\+\_\+\+D\+O\+R\+V\+A\+L\+U\+E\+S}~0x12\label{group__main__module_ga3976a059911d8e824b239b942bdd22b3}

\item 
\hypertarget{group__main__module_gafda68f85307e6882fef66b56a3cf9fa6}{}\#define {\bfseries C\+M\+D\+\_\+\+S\+E\+T\+C\+H\+A\+R}~0x13\label{group__main__module_gafda68f85307e6882fef66b56a3cf9fa6}

\item 
\hypertarget{group__main__module_ga90f87ae623514c4413d9bed1bc70708e}{}\#define {\bfseries C\+M\+D\+\_\+\+S\+E\+T\+M\+O\+D\+E}~0x14\label{group__main__module_ga90f87ae623514c4413d9bed1bc70708e}

\item 
\hypertarget{group__main__module_ga90b7a8cb7bc3fdbd98014a3e15ee6e9a}{}\#define {\bfseries T\+H\+R\+E\+A\+D\+\_\+\+S\+T\+A\+C\+K\+\_\+\+S\+I\+Z\+E}~100\label{group__main__module_ga90b7a8cb7bc3fdbd98014a3e15ee6e9a}

\item 
\hypertarget{group__main__module_ga300da08cc989dc0963caf3a5afc024b8}{}\#define {\bfseries N\+B\+\_\+\+A\+N\+A\+L\+O\+G\+\_\+\+C\+H\+A\+N\+N\+E\+L\+S}~3\label{group__main__module_ga300da08cc989dc0963caf3a5afc024b8}

\item 
\hypertarget{group__main__module_ga70a7dd109f59279a7520024b17e776d5}{}\#define {\bfseries Analog\+Inputs}~Analog\+\_\+\+Inputs\mbox{[}$\ast$(uint8\+\_\+t$\ast$)p\+Data\mbox{]}\label{group__main__module_ga70a7dd109f59279a7520024b17e776d5}

\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
bool \hyperlink{group__main__module_gac30606b79413b487e73dac23f591be4a}{Handle\+Analog\+Get\+Packet} (void)
\begin{DoxyCompactList}\small\item\em Handles a packet to get the instantaneous value of current from one of the A\+D\+C channels. \end{DoxyCompactList}\item 
bool \hyperlink{group__main__module_ga75733e9ade3cc030a8981653259f0136}{Handle\+D\+O\+R\+Values\+Packet} (void)
\begin{DoxyCompactList}\small\item\em Handles a packet to get various values about the D\+O\+R not already detailed in the tower protocol. \end{DoxyCompactList}\item 
bool \hyperlink{group__main__module_ga252d4f3523c9e44b9c404c9682331ecc}{Handle\+Set\+Char\+Packet} (void)
\begin{DoxyCompactList}\small\item\em Handles a packet to set the characteristic in use by the D\+O\+R. \end{DoxyCompactList}\item 
bool \hyperlink{group__main__module_ga9ea461c220078e580f655d0904e06a15}{Handle\+Set\+Mode\+Packet} (void)
\begin{DoxyCompactList}\small\item\em Handles a packet to change the D\+O\+R between sensitive and nonsensitive fault mode. \end{DoxyCompactList}\item 
void \hyperlink{group__main__module_gab7a5cb735555819b24719d6078028181}{Handle\+Packet} (void)
\begin{DoxyCompactList}\small\item\em Handles the packet by first checking to see what type of packet it is and processing it as per the Tower Serial Communication Protocol document. \end{DoxyCompactList}\item 
\hypertarget{group__main__module_ga1a74db037b63425694b8fc3365b59ec2}{}void \hyperlink{group__main__module_ga1a74db037b63425694b8fc3365b59ec2}{Trip\+Thread} (void $\ast$p\+Data)\label{group__main__module_ga1a74db037b63425694b8fc3365b59ec2}

\begin{DoxyCompactList}\small\item\em Thread to send a tripping signal through the D\+A\+C after a timeout period Tracks time elapsed in a local variable and keeps updating the new timer with each loop; waiting occurs at the end of each do-\/while loop, allowing for more samples to update the timer; if a new sample is Irms $<$ 1.\+03, end timing and reset everything. \end{DoxyCompactList}\item 
\hypertarget{group__main__module_gaf57aa549d9f31f77159135d6d2ae8de1}{}void \hyperlink{group__main__module_gaf57aa549d9f31f77159135d6d2ae8de1}{Sampling\+Thread} (void $\ast$p\+Data)\label{group__main__module_gaf57aa549d9f31f77159135d6d2ae8de1}

\begin{DoxyCompactList}\small\item\em Thread to collect samples at least 16 times per cycle (based on frequency 47.\+5-\/52.\+5\+Hz) and parse their R\+M\+S value to determine the correct timeout period for Trip\+Thread. Should be duplicated 3 times for each channel (3 phases) each with different arguments to distinguish channels. \end{DoxyCompactList}\item 
\hypertarget{group__main__module_ga94108820cbd6ec7384be98059164df0e}{}void \hyperlink{group__main__module_ga94108820cbd6ec7384be98059164df0e}{Packet\+Thread} (void $\ast$p\+Data)\label{group__main__module_ga94108820cbd6ec7384be98059164df0e}

\begin{DoxyCompactList}\small\item\em Packet handling thread -\/ M\+A\+K\+E S\+U\+R\+E T\+H\+I\+S I\+S A\+C\+T\+U\+A\+L\+L\+Y P\+O\+S\+S\+I\+B\+L\+E T\+O T\+R\+I\+G\+G\+E\+R. \end{DoxyCompactList}\item 
\hypertarget{group__main__module_ga840291bc02cba5474a4cb46a9b9566fe}{}int {\bfseries main} (void)\label{group__main__module_ga840291bc02cba5474a4cb46a9b9566fe}

\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hypertarget{group__main__module_ga997a52ba20d93cfdbe75937a9393a5d4}{}const uint8\+\_\+t {\bfseries T\+R\+I\+P\+\_\+\+T\+H\+R\+E\+A\+D\+\_\+\+P\+R\+I\+O\+R\+I\+T\+Y} \mbox{[}N\+B\+\_\+\+A\+N\+A\+L\+O\+G\+\_\+\+C\+H\+A\+N\+N\+E\+L\+S\mbox{]} = \{1, 2, 3\}\label{group__main__module_ga997a52ba20d93cfdbe75937a9393a5d4}

\item 
\hypertarget{group__main__module_ga2bd07bb6277f2194fc481e286400bfd6}{}const uint8\+\_\+t {\bfseries S\+A\+M\+P\+L\+I\+N\+G\+\_\+\+T\+H\+R\+E\+A\+D\+\_\+\+P\+R\+I\+O\+R\+I\+T\+Y} \mbox{[}N\+B\+\_\+\+A\+N\+A\+L\+O\+G\+\_\+\+C\+H\+A\+N\+N\+E\+L\+S\mbox{]} = \{4, 5, 6\}\label{group__main__module_ga2bd07bb6277f2194fc481e286400bfd6}

\item 
\hypertarget{group__main__module_ga6ed665ddbfa319f03b2bf15b9492ecb5}{}const uint8\+\_\+t {\bfseries P\+A\+C\+K\+E\+T\+\_\+\+T\+H\+R\+E\+A\+D\+\_\+\+P\+R\+I\+O\+R\+I\+T\+Y} = 7\label{group__main__module_ga6ed665ddbfa319f03b2bf15b9492ecb5}

\end{DoxyCompactItemize}


\subsection{Detailed Description}
Main module. This module contains user\textquotesingle{}s application code. 

\begin{DoxyVersion}{Version}
6.\+0 
\end{DoxyVersion}
